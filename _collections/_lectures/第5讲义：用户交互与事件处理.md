---
title: ç¬¬5è®²ä¹‰ï¼šç”¨æˆ·äº¤äº’ä¸äº‹ä»¶å¤„ç†
date: 2026-02-05
permalink: /lectures/lecture05
show: true
---


**è¯¾ç¨‹**: Android ç§»åŠ¨åº”ç”¨å¼€å‘å…¥é—¨  
**å‘¨æ¬¡**: ç¬¬5å‘¨  
**ä¸»é¢˜**: ç”¨æˆ·äº¤äº’ä¸äº‹ä»¶å¤„ç†  
**å­¦æ—¶**: 3è¯¾æ—¶ï¼ˆç†è®º2è¯¾æ—¶ + å®éªŒ1è¯¾æ—¶ï¼‰

---

## ğŸ“‹ æœ¬èŠ‚è¯¾å­¦ä¹ ç›®æ ‡

å®Œæˆæœ¬èŠ‚è¯¾åï¼Œå­¦ç”Ÿåº”è¯¥èƒ½å¤Ÿï¼š

1. âœ… æŒæ¡å¤šç§æ–¹å¼å®ç°ç‚¹å‡»äº‹ä»¶ç›‘å¬
2. âœ… ç†Ÿç»ƒä½¿ç”¨ EditText å¤„ç†ç”¨æˆ·æ–‡æœ¬è¾“å…¥
3. âœ… æ­£ç¡®ä½¿ç”¨ Toast å’Œ Snackbar å‘ç”¨æˆ·å±•ç¤ºæç¤ºä¿¡æ¯
4. âœ… åˆ›å»ºå’Œä½¿ç”¨ç³»ç»Ÿ Dialog å¯¹è¯æ¡†
5. âœ… å¼€å‘è‡ªå®šä¹‰ Dialog
6. âœ… å®ç°è¡¨å•è¾“å…¥éªŒè¯é€»è¾‘
7. âœ… ç‹¬ç«‹å¼€å‘ä¸€ä¸ªå®Œæ•´çš„è®¡ç®—å™¨åº”ç”¨

---

## ğŸ–±ï¸ ç¬¬ä¸€éƒ¨åˆ†ï¼šç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨

### 1.1 ä»€ä¹ˆæ˜¯äº‹ä»¶ç›‘å¬ï¼Ÿ

ç”¨æˆ·ä¸åº”ç”¨äº¤äº’æ—¶ä¼šäº§ç”Ÿå„ç§**äº‹ä»¶**ï¼Œä¾‹å¦‚ç‚¹å‡»æŒ‰é’®ã€è¾“å…¥æ–‡å­—ã€é•¿æŒ‰å±å¹•ã€‚

Android é€šè¿‡**ç›‘å¬å™¨ï¼ˆListenerï¼‰** æ•è·è¿™äº›äº‹ä»¶å¹¶æ‰§è¡Œå¯¹åº”çš„å¤„ç†é€»è¾‘ã€‚

```
ç”¨æˆ·æ“ä½œï¼ˆç‚¹å‡»æŒ‰é’®ï¼‰
    â†“
ç³»ç»Ÿæ•è·äº‹ä»¶
    â†“
è°ƒç”¨ç›‘å¬å™¨ä¸­çš„å›è°ƒæ–¹æ³•
    â†“
æ‰§è¡Œå¼€å‘è€…ç¼–å†™çš„å¤„ç†ä»£ç 
```

### 1.2 å®ç°ç‚¹å‡»ç›‘å¬çš„å››ç§æ–¹å¼

#### æ–¹å¼ä¸€ï¼šåŒ¿åå†…éƒ¨ç±»ï¼ˆç»å…¸å†™æ³•ï¼‰

```kotlin
val button = findViewById<Button>(R.id.button)

button.setOnClickListener(object : View.OnClickListener {
    override fun onClick(v: View?) {
        Toast.makeText(this@MainActivity, "æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼", Toast.LENGTH_SHORT).show()
    }
})
```

**ç‰¹ç‚¹**:

- å†™æ³•æœ€æ¸…æ™°ï¼Œå¯¹åˆå­¦è€…å‹å¥½
- ä»£ç ç¨æ˜¾å†—é•¿
- é€‚åˆå­¦ä¹ é˜¶æ®µç†è§£ç›‘å¬å™¨æœºåˆ¶

#### æ–¹å¼äºŒï¼šLambda è¡¨è¾¾å¼ï¼ˆæ¨èï¼‰

```kotlin
val button = findViewById<Button>(R.id.button)

button.setOnClickListener { v ->
    Toast.makeText(this, "æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼", Toast.LENGTH_SHORT).show()
}

// å¦‚æœä¸ä½¿ç”¨å‚æ•° vï¼Œå¯ä»¥çœç•¥
button.setOnClickListener {
    Toast.makeText(this, "æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼", Toast.LENGTH_SHORT).show()
}
```

**ç‰¹ç‚¹**:

- âœ… ä»£ç ç®€æ´
- âœ… Kotlin æ¨èå†™æ³•
- âœ… æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨æœ€å¤š

#### æ–¹å¼ä¸‰ï¼šå¼•ç”¨å½“å‰ç±»å®ç°æ¥å£

```kotlin
// Activity å®ç° View.OnClickListener æ¥å£
class MainActivity : AppCompatActivity(), View.OnClickListener {
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        
        val btn1 = findViewById<Button>(R.id.btn1)
        val btn2 = findViewById<Button>(R.id.btn2)
        
        // æ‰€æœ‰æŒ‰é’®å…±äº«ä¸€ä¸ªç›‘å¬å™¨
        btn1.setOnClickListener(this)
        btn2.setOnClickListener(this)
    }
    
    // ç»Ÿä¸€å¤„ç†æ‰€æœ‰ç‚¹å‡»äº‹ä»¶
    override fun onClick(v: View?) {
        when (v?.id) {
            R.id.btn1 -> {
                Toast.makeText(this, "æŒ‰é’®1è¢«ç‚¹å‡»", Toast.LENGTH_SHORT).show()
            }
            R.id.btn2 -> {
                Toast.makeText(this, "æŒ‰é’®2è¢«ç‚¹å‡»", Toast.LENGTH_SHORT).show()
            }
        }
    }
}
```

**ç‰¹ç‚¹**:

- å¤šä¸ªæŒ‰é’®å…±ç”¨ä¸€ä¸ªå¤„ç†æ–¹æ³•
- ç”¨ `when` åŒºåˆ†å“ªä¸ªæŒ‰é’®è¢«ç‚¹å‡»
- é€‚åˆæŒ‰é’®æ•°é‡è¾ƒå¤šçš„åœºæ™¯

#### æ–¹å¼å››ï¼šåœ¨å¸ƒå±€ XML ä¸­æŒ‡å®šï¼ˆä¸æ¨èï¼‰

```xml
<!-- activity_main.xml -->
<Button
    android:id="@+id/button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="ç‚¹å‡»æˆ‘"
    android:onClick="onButtonClick" />
```

```kotlin
// MainActivity.kt
// æ–¹æ³•åå¿…é¡»ä¸ XML ä¸­ onClick å€¼ä¸€è‡´
fun onButtonClick(v: View) {
    Toast.makeText(this, "æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼", Toast.LENGTH_SHORT).show()
}
```

**âš ï¸ æ³¨æ„**:

- æ–¹æ³•ç­¾åå¿…é¡»æ˜¯ `fun methodName(v: View)`
- åœ¨å®é™…é¡¹ç›®ä¸­**ä¸æ¨è**ä½¿ç”¨æ­¤æ–¹å¼
- ä¸æ–¹ä¾¿æµ‹è¯•å’Œç»´æŠ¤

### 1.3 å¸¸è§çš„äº‹ä»¶ç›‘å¬ç±»å‹

|ç›‘å¬å™¨|è§¦å‘æ¡ä»¶|å¸¸ç”¨åœºæ™¯|
|---|---|---|
|`OnClickListener`|ç‚¹å‡»|æŒ‰é’®ç‚¹å‡»|
|`OnLongClickListener`|é•¿æŒ‰|é•¿æŒ‰èœå•|
|`OnTouchListener`|è§¦æ‘¸ï¼ˆæŒ‰ä¸‹/ç§»åŠ¨/æŠ¬èµ·ï¼‰|è‡ªå®šä¹‰æ‰‹åŠ¿|
|`OnTextChangedListener`|æ–‡æœ¬å˜åŒ–|å®æ—¶æœç´¢|
|`OnFocusChangeListener`|ç„¦ç‚¹å˜åŒ–|è¡¨å•éªŒè¯|
|`OnEditorActionListener`|é”®ç›˜ç¡®è®¤é”®|æœç´¢æäº¤|

#### é•¿æŒ‰ç›‘å¬ç¤ºä¾‹

```kotlin
val button = findViewById<Button>(R.id.button)

button.setOnLongClickListener {
    Toast.makeText(this, "é•¿æŒ‰äº†ï¼", Toast.LENGTH_SHORT).show()
    true  // è¿”å› true è¡¨ç¤ºäº‹ä»¶å·²å¤„ç†
}
```

#### è§¦æ‘¸ç›‘å¬ç¤ºä¾‹

```kotlin
val view = findViewById<View>(R.id.touchArea)

view.setOnTouchListener { v, event ->
    when (event.action) {
        MotionEvent.ACTION_DOWN -> {
            Log.d("Touch", "æŒ‰ä¸‹: (${event.x}, ${event.y})")
        }
        MotionEvent.ACTION_MOVE -> {
            Log.d("Touch", "ç§»åŠ¨: (${event.x}, ${event.y})")
        }
        MotionEvent.ACTION_UP -> {
            Log.d("Touch", "æŠ¬èµ·: (${event.x}, ${event.y})")
        }
    }
    true  // è¿”å› true è¡¨ç¤ºäº‹ä»¶å·²æ¶ˆè´¹
}
```

### 1.4 ç»¼åˆç¤ºä¾‹ï¼šå¤šæŒ‰é’®äº¤äº’

```kotlin
class MainActivity : AppCompatActivity() {
    
    private var clickCount = 0
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        
        val countText = findViewById<TextView>(R.id.countText)
        val btnIncrement = findViewById<Button>(R.id.btnIncrement)
        val btnDecrement = findViewById<Button>(R.id.btnDecrement)
        val btnReset = findViewById<Button>(R.id.btnReset)
        
        // åŠ  1
        btnIncrement.setOnClickListener {
            clickCount++
            countText.text = "è®¡æ•°: $clickCount"
        }
        
        // å‡ 1
        btnDecrement.setOnClickListener {
            clickCount--
            countText.text = "è®¡æ•°: $clickCount"
        }
        
        // é‡ç½®
        btnReset.setOnClickListener {
            clickCount = 0
            countText.text = "è®¡æ•°: $clickCount"
        }
    }
}
```

å¯¹åº”å¸ƒå±€ (`activity_main.xml`):

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center"
    android:padding="24dp">

    <TextView
        android:id="@+id/countText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="è®¡æ•°: 0"
        android:textSize="36sp"
        android:textStyle="bold"
        android:textColor="#028090"
        android:layout_marginBottom="40dp" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <Button
            android:id="@+id/btnDecrement"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text=" âˆ’ "
            android:textSize="24sp"
            android:layout_marginEnd="8dp" />

        <Button
            android:id="@+id/btnIncrement"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text=" + "
            android:textSize="24sp"
            android:layout_marginStart="8dp" />

    </LinearLayout>

    <Button
        android:id="@+id/btnReset"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="é‡ç½®"
        android:textSize="16sp"
        android:layout_marginTop="16dp" />

</LinearLayout>
```

---

## âœï¸ ç¬¬äºŒéƒ¨åˆ†ï¼šEditText è¾“å…¥å¤„ç†

### 2.1 EditText åŸºç¡€

**EditText** æ˜¯ Android ä¸­ç”¨äºæ–‡æœ¬è¾“å…¥çš„ç»„ä»¶ï¼Œæ˜¯ TextView çš„å­ç±»ã€‚

```xml
<EditText
    android:id="@+id/editText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="è¯·è¾“å…¥æ‚¨çš„å§“å"
    android:textSize="16sp" />
```

### 2.2 EditText çš„å¸¸ç”¨å±æ€§

|å±æ€§|è¯´æ˜|ç¤ºä¾‹|
|---|---|---|
|`android:hint`|å ä½æ–‡æœ¬ï¼ˆç°è‰²æç¤ºï¼‰|`"è¯·è¾“å…¥å§“å"`|
|`android:inputType`|è¾“å…¥ç±»å‹|`text`, `number`, `textPassword`|
|`android:maxLines`|æœ€å¤§è¡Œæ•°|`1`|
|`android:maxLength`|æœ€å¤§å­—ç¬¦æ•°|`20`|
|`android:textAlignment`|æ–‡æœ¬å¯¹é½|`center`|
|`android:gravity`|å†…å®¹å¯¹é½|`center_vertical`|
|`android:cursorVisible`|å…‰æ ‡æ˜¯å¦å¯è§|`true` / `false`|
|`android:textColor`|æ–‡å­—é¢œè‰²|`@color/black`|
|`android:hintTextColor`|æç¤ºæ–‡å­—é¢œè‰²|`@color/gray`|

### 2.3 inputType è¯¦è§£

```xml
<!-- æ™®é€šæ–‡æœ¬ -->
<EditText android:inputType="text" />

<!-- å¯†ç ï¼ˆæ˜¾ç¤ºä¸ºç‚¹ï¼‰ -->
<EditText android:inputType="textPassword" />

<!-- çº¯æ•°å­— -->
<EditText android:inputType="number" />

<!-- æ•°å­—ï¼ˆå«å°æ•°ç‚¹ï¼‰ -->
<EditText android:inputType="numberDecimal" />

<!-- é‚®ç®±åœ°å€ -->
<EditText android:inputType="textEmailAddress" />

<!-- ç”µè¯å·ç  -->
<EditText android:inputType="phone" />

<!-- URL åœ°å€ -->
<EditText android:inputType="textUri" />

<!-- å¤šè¡Œæ–‡æœ¬ -->
<EditText android:inputType="textMultiline"
          android:maxLines="5" />
```

### 2.4 è·å–å’Œè®¾ç½®æ–‡æœ¬

```kotlin
val editText = findViewById<EditText>(R.id.editText)

// è·å–ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬
val userInput: String = editText.text.toString()

// è®¾ç½®æ–‡æœ¬å†…å®¹
editText.setText("æ–°çš„å†…å®¹")

// æ¸…ç©ºæ–‡æœ¬
editText.setText("")

// è·å–æ–‡æœ¬é•¿åº¦
val length: Int = editText.text.length

// é€‰ä¸­æ‰€æœ‰æ–‡æœ¬
editText.selectAll()

// å°†å…‰æ ‡ç§»åˆ°æœ«å°¾
editText.setSelection(editText.text.length)
```

### 2.5 ç›‘å¬æ–‡æœ¬å˜åŒ–

#### æ–¹å¼ä¸€ï¼šTextWatcherï¼ˆå®æ—¶ç›‘å¬æ¯ä¸ªå­—ç¬¦å˜åŒ–ï¼‰

```kotlin
import android.text.TextWatcher
import android.text.Editable

val editText = findViewById<EditText>(R.id.editText)
val resultText = findViewById<TextView>(R.id.resultText)

editText.addTextChangedListener(object : TextWatcher {
    // æ–‡æœ¬å³å°†æ”¹å˜å‰è°ƒç”¨
    override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {
        Log.d("TextWatcher", "Before: $s")
    }
    
    // æ–‡æœ¬æ­£åœ¨æ”¹å˜ä¸­è°ƒç”¨
    override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {
        Log.d("TextWatcher", "OnChange: $s")
        
        // å®æ—¶æ›´æ–°æ˜¾ç¤º
        resultText.text = "è¾“å…¥é•¿åº¦: ${s?.length ?: 0}"
    }
    
    // æ–‡æœ¬æ”¹å˜å®Œæˆåè°ƒç”¨
    override fun afterTextChanged(s: Editable?) {
        Log.d("TextWatcher", "After: $s")
    }
})
```

**ä½¿ç”¨åœºæ™¯**:

- ğŸ” å®æ—¶æœç´¢ï¼ˆç”¨æˆ·è¾“å…¥è¾¹æœç´¢ï¼‰
- ğŸ“ å­—ç¬¦è®¡æ•°
- âœ… å®æ—¶éªŒè¯è¾“å…¥æ˜¯å¦åˆæ³•

#### æ–¹å¼äºŒï¼šç®€åŒ–å†™æ³•ï¼ˆä½¿ç”¨æ‰©å±•å‡½æ•°ï¼‰

```kotlin
// å¦‚æœåªéœ€è¦åœ¨æ–‡æœ¬æ”¹å˜åæ‰§è¡Œæ“ä½œï¼Œå¯ä»¥ç”¨ afterTextChanged
editText.doAfterTextChanged { text ->
    resultText.text = "è¾“å…¥é•¿åº¦: ${text?.length ?: 0}"
}

// éœ€è¦æ·»åŠ å¯¼å…¥
import androidx.core.widget.doAfterTextChanged
```

#### æ–¹å¼ä¸‰ï¼šç›‘å¬é”®ç›˜"ç¡®è®¤"é”®

```kotlin
editText.setOnEditorActionListener { textView, actionId, event ->
    if (actionId == EditorInfo.IME_ACTION_DONE ||
        actionId == EditorInfo.IME_ACTION_NEXT) {
        // ç”¨æˆ·æŒ‰äº†ç¡®è®¤/ä¸‹ä¸€æ­¥æŒ‰é’®
        val input = textView.text.toString()
        Toast.makeText(this, "æäº¤: $input", Toast.LENGTH_SHORT).show()
        true  // äº‹ä»¶å·²æ¶ˆè´¹
    } else {
        false
    }
}
```

å¯¹åº” XML é…ç½®ï¼ˆè®¾ç½®é”®ç›˜ç¡®è®¤æŒ‰é’®ç±»å‹ï¼‰:

```xml
<EditText
    android:id="@+id/editText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="è¯·è¾“å…¥å†…å®¹"
    android:imeActionId="@+id/actionSearch"
    android:inputType="text"
    android:singleLine="true"
    android:importantForAutofill="no" />
```

### 2.6 å®é™…åº”ç”¨ï¼šç”¨æˆ·åå’Œå¯†ç è¾“å…¥

```kotlin
class LoginActivity : AppCompatActivity() {
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_login)
        
        val usernameEdit = findViewById<EditText>(R.id.usernameEdit)
        val passwordEdit = findViewById<EditText>(R.id.passwordEdit)
        val loginButton = findViewById<Button>(R.id.loginButton)
        val errorText = findViewById<TextView>(R.id.errorText)
        
        loginButton.setOnClickListener {
            val username = usernameEdit.text.toString().trim()
            val password = passwordEdit.text.toString()
            
            // ç®€å•éªŒè¯
            if (username.isEmpty()) {
                errorText.text = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º"
                usernameEdit.requestFocus()
                return@setOnClickListener
            }
            
            if (password.isEmpty()) {
                errorText.text = "å¯†ç ä¸èƒ½ä¸ºç©º"
                passwordEdit.requestFocus()
                return@setOnClickListener
            }
            
            if (password.length < 6) {
                errorText.text = "å¯†ç é•¿åº¦è‡³å°‘6ä½"
                passwordEdit.requestFocus()
                return@setOnClickListener
            }
            
            // éªŒè¯é€šè¿‡
            errorText.text = ""
            Toast.makeText(this, "ç™»å½•æˆåŠŸï¼ç”¨æˆ·: $username", Toast.LENGTH_SHORT).show()
        }
    }
}
```

å¯¹åº”å¸ƒå±€ (`activity_login.xml`):

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center"
    android:padding="32dp">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="ç”¨æˆ·ç™»å½•"
        android:textSize="28sp"
        android:textStyle="bold"
        android:textColor="#028090"
        android:layout_marginBottom="40dp" />

    <EditText
        android:id="@+id/usernameEdit"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="ç”¨æˆ·å"
        android:inputType="text"
        android:textSize="16sp"
        android:layout_marginBottom="16dp" />

    <EditText
        android:id="@+id/passwordEdit"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="å¯†ç "
        android:inputType="textPassword"
        android:textSize="16sp"
        android:layout_marginBottom="8dp" />

    <TextView
        android:id="@+id/errorText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text=""
        android:textSize="14sp"
        android:textColor="#F44336"
        android:layout_marginBottom="24dp" />

    <Button
        android:id="@+id/loginButton"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="ç™»å½•"
        android:textSize="18sp" />

</LinearLayout>
```

---

## ğŸ’¬ ç¬¬ä¸‰éƒ¨åˆ†ï¼šToast å’Œ Snackbar æç¤º

### 3.1 Toast

**Toast** æ˜¯æœ€ç®€å•çš„æç¤ºæ–¹å¼ï¼Œæ˜¾ç¤ºåœ¨å±å¹•åº•éƒ¨ï¼Œè‡ªåŠ¨æ¶ˆå¤±ã€‚

#### åŸºæœ¬ç”¨æ³•

```kotlin
// çŸ­æ—¶é—´æ˜¾ç¤ºï¼ˆçº¦2ç§’ï¼‰
Toast.makeText(this, "æç¤ºä¿¡æ¯", Toast.LENGTH_SHORT).show()

// é•¿æ—¶é—´æ˜¾ç¤ºï¼ˆçº¦5ç§’ï¼‰
Toast.makeText(this, "è¿™æ˜¯ä¸€ä¸ªè¾ƒé•¿çš„æç¤ºä¿¡æ¯", Toast.LENGTH_LONG).show()
```

**å‚æ•°è¯´æ˜**:

- ç¬¬ä¸€ä¸ªå‚æ•°: `Context`ï¼Œåœ¨ Activity ä¸­ç”¨ `this`
- ç¬¬äºŒä¸ªå‚æ•°: è¦æ˜¾ç¤ºçš„æ–‡æœ¬
- ç¬¬ä¸‰ä¸ªå‚æ•°: æ˜¾ç¤ºæ—¶é•¿
    - `Toast.LENGTH_SHORT` â‰ˆ 2ç§’
    - `Toast.LENGTH_LONG` â‰ˆ 5ç§’

#### å¸¸è§ä½¿ç”¨åœºæ™¯

```kotlin
// æ“ä½œæˆåŠŸ
Toast.makeText(this, "âœ“ ä¿å­˜æˆåŠŸ", Toast.LENGTH_SHORT).show()

// æ“ä½œå¤±è´¥
Toast.makeText(this, "âœ— æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•", Toast.LENGTH_LONG).show()

// æé†’ç”¨æˆ·
Toast.makeText(this, "âš ï¸ è¯·å¡«å†™å¿…éœ€å­—æ®µ", Toast.LENGTH_SHORT).show()

// æ˜¾ç¤ºè®¡ç®—ç»“æœ
Toast.makeText(this, "ç»“æœ: $result", Toast.LENGTH_SHORT).show()
```

#### âš ï¸ Toast æ³¨æ„äº‹é¡¹

```kotlin
// âŒ é”™è¯¯ï¼šåœ¨å¾ªç¯ä¸­è¿ç»­åˆ›å»º Toast
for (i in 1..5) {
    Toast.makeText(this, "Toast $i", Toast.LENGTH_SHORT).show()
    // ä¼šå¯¼è‡´ Toast æ’é˜Ÿæ˜¾ç¤ºï¼Œä½“éªŒå¾ˆå·®
}

// âœ… æ­£ç¡®ï¼šæ¯æ¬¡åªæ˜¾ç¤ºä¸€ä¸ª Toast
Toast.makeText(this, "å¾ªç¯æ‰§è¡Œå®Œæ¯•ï¼Œå…±5æ¬¡", Toast.LENGTH_SHORT).show()
```

### 3.2 Snackbar

**Snackbar** æ˜¯ Material Design æ¨èçš„æç¤ºç»„ä»¶ï¼Œæ¯” Toast åŠŸèƒ½æ›´å¼ºã€‚

#### Toast vs Snackbar å¯¹æ¯”

|ç‰¹æ€§|Toast|Snackbar|
|---|---|---|
|ä½ç½®|å±å¹•åº•éƒ¨ï¼ˆå›ºå®šï¼‰|å±å¹•åº•éƒ¨ï¼ˆå¯è‡ªå®šä¹‰ï¼‰|
|ç‚¹å‡»æ¶ˆé™¤|âŒ ä¸æ”¯æŒ|âœ… æ”¯æŒ|
|åŠ¨ä½œæŒ‰é’®|âŒ ä¸æ”¯æŒ|âœ… æ”¯æŒ|
|è‡ªå®šä¹‰é¢œè‰²|è¾ƒéš¾|âœ… æ–¹ä¾¿|
|é®æŒ¡åº•éƒ¨æ§ä»¶|å¯èƒ½é®æŒ¡|è‡ªåŠ¨é¿å¼€|
|æ¨èåœºæ™¯|ç®€å•æç¤º|å¸¦æ“ä½œçš„æç¤º|

#### åŸºæœ¬ç”¨æ³•

```kotlin
// éœ€è¦ä¸€ä¸ª View ä½œä¸ºé”šç‚¹ï¼ˆé€šå¸¸ç”¨ Activity çš„æ ¹å¸ƒå±€ï¼‰
val snackbar = Snackbar.make(
    findViewById(R.id.rootLayout),  // çˆ¶è§†å›¾
    "æ“ä½œæˆåŠŸï¼",                   // æç¤ºæ–‡æœ¬
    Snackbar.LENGTH_SHORT          // æ˜¾ç¤ºæ—¶é•¿
)
snackbar.show()

// ç®€å†™
Snackbar.make(findViewById(R.id.rootLayout), "æç¤ºä¿¡æ¯", Snackbar.LENGTH_SHORT).show()
```

#### å¸¦"æ’¤é”€"åŠ¨ä½œçš„ Snackbar

```kotlin
// åˆ é™¤æ•°æ®æ—¶æä¾›æ’¤é”€é€‰é¡¹
fun deleteItem(item: String) {
    // å…ˆæ‰§è¡Œåˆ é™¤
    dataList.remove(item)
    
    Snackbar.make(
        findViewById(R.id.rootLayout),
        "å·²åˆ é™¤: $item",
        Snackbar.LENGTH_LONG
    ).apply {
        setAction("æ’¤é”€") {
            // ç”¨æˆ·ç‚¹å‡»"æ’¤é”€"æ—¶æ‰§è¡Œ
            dataList.add(item)
            Toast.makeText(this@MainActivity, "å·²æ¢å¤: $item", Toast.LENGTH_SHORT).show()
        }
        show()
    }
}
```

#### è‡ªå®šä¹‰ Snackbar é¢œè‰²

```kotlin
Snackbar.make(
    findViewById(R.id.rootLayout),
    "æˆåŠŸï¼",
    Snackbar.LENGTH_SHORT
).apply {
    // è®¾ç½®èƒŒæ™¯é¢œè‰²ï¼ˆç»¿è‰² - è¡¨ç¤ºæˆåŠŸï¼‰
    setBackgroundColor(android.graphics.Color.parseColor("#4CAF50"))
    
    // è®¾ç½®æ–‡æœ¬é¢œè‰²ï¼ˆç™½è‰²ï¼‰
    setTextColor(android.graphics.Color.WHITE)
    
    // è®¾ç½®åŠ¨ä½œæŒ‰é’®é¢œè‰²
    setActionTextColor(android.graphics.Color.parseColor("#FFEB3B"))
    
    show()
}
```

#### Snackbar æ˜¾ç¤ºæ—¶é•¿

```kotlin
Snackbar.LENGTH_SHORT  // çº¦2ç§’
Snackbar.LENGTH_LONG   // çº¦5ç§’
Snackbar.LENGTH_INDEFINITE  // ä¸è‡ªåŠ¨æ¶ˆå¤±ï¼ˆå¿…é¡»æœ‰åŠ¨ä½œæŒ‰é’®æˆ–æ‰‹åŠ¨æ¶ˆé™¤ï¼‰
```

### 3.3 ä½•æ—¶ç”¨ Toastï¼Œä½•æ—¶ç”¨ Snackbarï¼Ÿ

```
é€‰æ‹©æŒ‡å—ï¼š

ä½¿ç”¨ Toast:
âœ“ ç®€å•ä¿¡æ¯å±•ç¤ºï¼ˆå¦‚"åŠ è½½å®Œæˆ"ï¼‰
âœ“ ä¸éœ€è¦ç”¨æˆ·åšä»»ä½•æ“ä½œ
âœ“ çŸ­æš‚é€šçŸ¥

ä½¿ç”¨ Snackbar:
âœ“ ç”¨æˆ·æ‰§è¡Œäº†æŸä¸ªæ“ä½œï¼Œéœ€è¦ç¡®è®¤
âœ“ éœ€è¦æä¾›"æ’¤é”€"åŠŸèƒ½ï¼ˆå¦‚åˆ é™¤ï¼‰
âœ“ éœ€è¦è‡ªå®šä¹‰é¢œè‰²åæ˜ çŠ¶æ€ï¼ˆæˆåŠŸ/å¤±è´¥/è­¦å‘Šï¼‰
âœ“ ä¿¡æ¯æ›´é‡è¦ï¼Œå¸Œæœ›ç”¨æˆ·å…³æ³¨
```

---

## ğŸ—¨ï¸ ç¬¬å››éƒ¨åˆ†ï¼šDialog å¯¹è¯æ¡†

### 4.1 ä»€ä¹ˆæ˜¯ Dialogï¼Ÿ

**Dialog** æ˜¯ä¸€ä¸ªå¼¹å‡ºåœ¨å½“å‰ç•Œé¢ä¸Šæ–¹çš„çª—å£ï¼Œç”¨äºï¼š

- ç¡®è®¤ç”¨æˆ·æ“ä½œï¼ˆç¡®è®¤/å–æ¶ˆï¼‰
- æ”¶é›†ç”¨æˆ·è¾“å…¥
- æ˜¾ç¤ºé‡è¦ä¿¡æ¯
- è®©ç”¨æˆ·åšå‡ºé€‰æ‹©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             â”‚
â”‚    MainActivity             â”‚  â† è¢«å˜æš—ï¼ˆä¸å¯äº¤äº’ï¼‰
â”‚                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚    â”‚   Dialog        â”‚      â”‚  â† å¼¹å‡ºçª—å£ï¼ˆå¯äº¤äº’ï¼‰
â”‚    â”‚                 â”‚      â”‚
â”‚    â”‚  [ç¡®è®¤] [å–æ¶ˆ]  â”‚      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 AlertDialog - ç³»ç»Ÿå¯¹è¯æ¡†

AlertDialog æ˜¯ Android æä¾›çš„æ ‡å‡†å¯¹è¯æ¡†ï¼Œæ”¯æŒæœ€å¤šä¸‰ä¸ªæŒ‰é’®ã€‚

#### åŸºæœ¬ç»“æ„

AlertDialog ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆ:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ·ï¸ Titleï¼ˆæ ‡é¢˜ï¼‰     â”‚  â† å¯é€‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ Messageï¼ˆæ¶ˆæ¯ï¼‰   â”‚  â† å¯é€‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Neutral] [Neg][Pos] â”‚  â† æŒ‰é’®ï¼ˆæœ€å¤š3ä¸ªï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Positive Button: ç¡®è®¤/æ˜¯/å¥½çš„ï¼ˆè“è‰²ï¼Œæœ€å³ï¼‰
Negative Button: å–æ¶ˆ/å¦ï¼ˆç°è‰²ï¼Œä¸­é—´ï¼‰
Neutral Button:  å…¶ä»–é€‰é¡¹ï¼ˆå·¦è¾¹ï¼‰
```

#### ç¤ºä¾‹1: ç¡®è®¤å¯¹è¯æ¡†

```kotlin
fun showConfirmDialog() {
    AlertDialog.Builder(this)
        .setTitle("ç¡®è®¤åˆ é™¤")                        // æ ‡é¢˜
        .setMessage("æ‚¨ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé¡¹ç›®å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ã€‚")  // æ¶ˆæ¯
        .setPositiveButton("åˆ é™¤") { dialog, which ->  // ç¡®è®¤æŒ‰é’®
            dialog.dismiss()  // å…³é—­å¯¹è¯æ¡†
            Toast.makeText(this, "é¡¹ç›®å·²åˆ é™¤", Toast.LENGTH_SHORT).show()
        }
        .setNegativeButton("å–æ¶ˆ") { dialog, which ->  // å–æ¶ˆæŒ‰é’®
            dialog.dismiss()
        }
        .show()  // æ˜¾ç¤ºå¯¹è¯æ¡†
}
```

#### ç¤ºä¾‹2: ä¿¡æ¯æç¤ºå¯¹è¯æ¡†

```kotlin
fun showInfoDialog() {
    AlertDialog.Builder(this)
        .setTitle("ğŸ“¢ é€šçŸ¥")
        .setMessage("ç³»ç»Ÿå°†åœ¨å‡Œæ™¨2ç‚¹è¿›è¡Œç»´æŠ¤ï¼Œå±Šæ—¶æœåŠ¡å°†æš‚åœçº¦30åˆ†é’Ÿã€‚")
        .setPositiveButton("æˆ‘çŸ¥é“äº†") { dialog, _ ->
            dialog.dismiss()
        }
        .show()
}
```

#### ç¤ºä¾‹3: ä¸‰ä¸ªæŒ‰é’®çš„å¯¹è¯æ¡†

```kotlin
fun showSaveDialog() {
    AlertDialog.Builder(this)
        .setTitle("ä¿å­˜æ›´æ”¹")
        .setMessage("æ‚¨æœ‰æœªä¿å­˜çš„æ›´æ”¹ï¼Œé€€å‡ºå‰æ˜¯å¦è¦ä¿å­˜ï¼Ÿ")
        .setPositiveButton("ä¿å­˜") { dialog, _ ->
            saveData()
            dialog.dismiss()
            finish()
        }
        .setNegativeButton("ä¸ä¿å­˜") { dialog, _ ->
            dialog.dismiss()
            finish()  // ä¸ä¿å­˜ç›´æ¥é€€å‡º
        }
        .setNeutralButton("ç»§ç»­ç¼–è¾‘") { dialog, _ ->
            dialog.dismiss()  // å…³é—­å¯¹è¯æ¡†ï¼Œç»§ç»­ç¼–è¾‘
        }
        .show()
}
```

#### ç¤ºä¾‹4: åˆ—è¡¨é€‰æ‹©å¯¹è¯æ¡†

```kotlin
fun showListDialog() {
    val languages = arrayOf("Kotlin", "Java", "Python", "Swift", "Dart")
    
    AlertDialog.Builder(this)
        .setTitle("é€‰æ‹©è¯­è¨€")
        .setItems(languages) { dialog, index ->
            // index æ˜¯ç”¨æˆ·é€‰æ‹©çš„é¡¹ç›®ç´¢å¼•
            Toast.makeText(this, "é€‰æ‹©äº†: ${languages[index]}", Toast.LENGTH_SHORT).show()
            dialog.dismiss()
        }
        .setNegativeButton("å–æ¶ˆ") { dialog, _ ->
            dialog.dismiss()
        }
        .show()
}
```

#### ç¤ºä¾‹5: å•é€‰å¯¹è¯æ¡†

```kotlin
fun showSingleChoiceDialog() {
    val themes = arrayOf("æµ…è‰²ä¸»é¢˜", "æ·±è‰²ä¸»é¢˜", "è·Ÿéšç³»ç»Ÿ")
    var selectedIndex = 0  // é»˜è®¤é€‰ä¸­ç¬¬ä¸€ä¸ª
    
    AlertDialog.Builder(this)
        .setTitle("ä¸»é¢˜è®¾ç½®")
        .setSingleChoiceItems(themes, selectedIndex) { _, index ->
            selectedIndex = index  // è®°å½•é€‰æ‹©
        }
        .setPositiveButton("ç¡®è®¤") { dialog, _ ->
            Toast.makeText(this, "é€‰æ‹©äº†: ${themes[selectedIndex]}", Toast.LENGTH_SHORT).show()
            dialog.dismiss()
        }
        .setNegativeButton("å–æ¶ˆ") { dialog, _ ->
            dialog.dismiss()
        }
        .show()
}
```

#### ç¤ºä¾‹6: å¤šé€‰å¯¹è¯æ¡†

```kotlin
fun showMultiChoiceDialog() {
    val toppings = arrayOf("èŠå£«", "ç•ªèŒ„", "è˜‘è‡", "é¦™è‘±", "åŸ¹æ ¹")
    val checkedItems = BooleanArray(toppings.size) { false }  // é»˜è®¤å…¨ä¸é€‰
    
    AlertDialog.Builder(this)
        .setTitle("é€‰æ‹©é…æ–™")
        .setMultiChoiceItems(toppings, checkedItems) { _, index, isChecked ->
            checkedItems[index] = isChecked
        }
        .setPositiveButton("ç¡®è®¤") { dialog, _ ->
            val selected = toppings.filterIndexed { index, _ -> checkedItems[index] }
            Toast.makeText(this, "é€‰æ‹©äº†: ${selected.joinToString(", ")}", Toast.LENGTH_SHORT).show()
            dialog.dismiss()
        }
        .setNegativeButton("å–æ¶ˆ") { dialog, _ ->
            dialog.dismiss()
        }
        .show()
}
```

### 4.3 è‡ªå®šä¹‰ Dialog

å½“ç³»ç»Ÿ AlertDialog æ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼Œéœ€è¦åˆ›å»ºè‡ªå®šä¹‰ Dialogã€‚

#### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ AlertDialog + è‡ªå®šä¹‰å¸ƒå±€

**æ­¥éª¤1**: åˆ›å»ºè‡ªå®šä¹‰å¸ƒå±€æ–‡ä»¶ (`res/layout/dialog_input.xml`)

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="20dp">

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="æ·»åŠ æ–°é¡¹ç›®"
        android:textSize="20sp"
        android:textStyle="bold"
        android:textColor="#028090"
        android:layout_marginBottom="16dp" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="é¡¹ç›®åç§°"
        android:textSize="14sp"
        android:textColor="#757575"
        android:layout_marginBottom="4dp" />

    <EditText
        android:id="@+id/dialogNameEdit"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="è¯·è¾“å…¥é¡¹ç›®åç§°"
        android:inputType="text"
        android:textSize="16sp"
        android:layout_marginBottom="16dp" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="ä¼˜å…ˆçº§"
        android:textSize="14sp"
        android:textColor="#757575"
        android:layout_marginBottom="4dp" />

    <Spinner
        android:id="@+id/dialogPrioritySpinner"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="16sp" />

</LinearLayout>
```

**æ­¥éª¤2**: åœ¨ä»£ç ä¸­ä½¿ç”¨è‡ªå®šä¹‰å¸ƒå±€

```kotlin
fun showCustomInputDialog() {
    // åŠ è½½è‡ªå®šä¹‰å¸ƒå±€
    val dialogView = LayoutInflater.from(this)
        .inflate(R.layout.dialog_input, null)
    
    val nameEdit = dialogView.findViewById<EditText>(R.id.dialogNameEdit)
    val prioritySpinner = dialogView.findViewById<Spinner>(R.id.dialogPrioritySpinner)
    
    // è®¾ç½® Spinner æ•°æ®
    val priorities = arrayOf("é«˜", "ä¸­", "ä½")
    prioritySpinner.adapter = ArrayAdapter(this, android.R.layout.simple_spinner_item, priorities)
    
    AlertDialog.Builder(this)
        .setView(dialogView)  // è®¾ç½®è‡ªå®šä¹‰å¸ƒå±€
        .setPositiveButton("æ·»åŠ ") { dialog, _ ->
            val name = nameEdit.text.toString().trim()
            val priority = prioritySpinner.selectedItem as String
            
            if (name.isEmpty()) {
                Toast.makeText(this, "é¡¹ç›®åç§°ä¸èƒ½ä¸ºç©º", Toast.LENGTH_SHORT).show()
                return@setPositiveButton  // ä¸å…³é—­ dialog
            }
            
            Toast.makeText(this, "æ·»åŠ é¡¹ç›®: $name (ä¼˜å…ˆçº§: $priority)", Toast.LENGTH_SHORT).show()
            dialog.dismiss()
        }
        .setNegativeButton("å–æ¶ˆ") { dialog, _ ->
            dialog.dismiss()
        }
        .show()
}
```

#### æ–¹æ³•äºŒï¼šç»§æ‰¿ Dialog ç±»åˆ›å»ºå®Œå…¨è‡ªå®šä¹‰å¯¹è¯æ¡†

**æ­¥éª¤1**: åˆ›å»ºå¸ƒå±€ (`res/layout/dialog_calculator_history.xml`)

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="@color/white"
    android:paddingBottom="16dp">

    <!-- æ ‡é¢˜æ  -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="48dp"
        android:orientation="horizontal"
        android:gravity="center_vertical"
        android:background="#028090"
        android:paddingHorizontal="16dp">

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="è®¡ç®—å†å²"
            android:textSize="18sp"
            android:textStyle="bold"
            android:textColor="@color/white" />

        <ImageView
            android:id="@+id/dialogCloseBtn"
            android:layout_width="24dp"
            android:layout_height="24dp"
            android:src="@android:drawable/ic_menu_close_clear_search"
            android:colorFilter="@color/white"
            android:contentDescription="å…³é—­" />

    </LinearLayout>

    <!-- å†å²åˆ—è¡¨ -->
    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="200dp">

        <LinearLayout
            android:id="@+id/dialogHistoryList"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="16dp" />

    </ScrollView>

    <!-- æ¸…ç©ºæŒ‰é’® -->
    <Button
        android:id="@+id/dialogClearBtn"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="æ¸…ç©ºå†å²"
        android:textColor="#F44336"
        android:layout_marginHorizontal="16dp"
        style="@style/Widget.Material3.Button.OutlinedButton" />

</LinearLayout>
```

**æ­¥éª¤äºŒ**: åˆ›å»ºè‡ªå®šä¹‰ Dialog ç±»

```kotlin
import android.app.Dialog
import android.content.Context

class HistoryDialog(
    context: Context,
    private val historyList: List<String>,
    private val onClear: () -> Unit  // æ¸…ç©ºå›è°ƒ
) : Dialog(context) {
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        
        // è®¾ç½®å¸ƒå±€
        setContentView(R.layout.dialog_calculator_history)
        
        // è®¾ç½®å®½åº¦
        window?.attributes?.width = android.R.attr.match_parent
        
        // å…³é—­æŒ‰é’®
        findViewById<ImageView>(R.id.dialogCloseBtn).setOnClickListener {
            dismiss()
        }
        
        // å¡«å……å†å²è®°å½•
        val historyLayout = findViewById<LinearLayout>(R.id.dialogHistoryList)
        if (historyList.isEmpty()) {
            val emptyText = TextView(context)
            emptyText.text = "æ²¡æœ‰è®¡ç®—å†å²"
            emptyText.textAlignment = android.view.TextAlignment.CENTER
            emptyText.setPadding(0, 40, 0, 40)
            historyLayout.addView(emptyText)
        } else {
            historyList.forEach { record ->
                val textView = TextView(context)
                textView.text = record
                textView.textSize = 15f
                textView.setPadding(0, 12, 0, 12)
                historyLayout.addView(textView)
                
                // æ·»åŠ åˆ†éš”çº¿
                val divider = View(context)
                divider.setBackgroundColor(android.graphics.Color.parseColor("#EEEEEE"))
                divider.layoutParams = ViewGroup.LayoutParams(
                    ViewGroup.LayoutParams.MATCH_PARENT,
                    1
                )
                historyLayout.addView(divider)
            }
        }
        
        // æ¸…ç©ºæŒ‰é’®
        findViewById<Button>(R.id.dialogClearBtn).setOnClickListener {
            onClear()
            dismiss()
        }
    }
}
```

**ä½¿ç”¨æ–¹æ³•**:

```kotlin
// åœ¨ Activity ä¸­
val historyData = listOf(
    "3 + 5 = 8",
    "100 Ã· 4 = 25",
    "7 Ã— 8 = 56"
)

val dialog = HistoryDialog(this, historyData) {
    // æ¸…ç©ºå›è°ƒ
    Toast.makeText(this, "å†å²è®°å½•å·²æ¸…ç©º", Toast.LENGTH_SHORT).show()
}
dialog.show()
```

### 4.4 Dialog æ³¨æ„äº‹é¡¹

```kotlin
// âš ï¸ æ³¨æ„1: Dialog ä¸è¦åœ¨é UI çº¿ç¨‹ä¸­æ˜¾ç¤º
// âŒ é”™è¯¯
Thread {
    AlertDialog.Builder(this).setMessage("Hi").show()  // å´©æºƒï¼
}.start()

// âœ… æ­£ç¡® - åˆ‡å›ä¸»çº¿ç¨‹
Thread {
    runOnUiThread {
        AlertDialog.Builder(this).setMessage("Hi").show()
    }
}.start()

// âš ï¸ æ³¨æ„2: ç¡®ä¿åœ¨ Activity ç”Ÿå‘½å‘¨æœŸå†…æ˜¾ç¤º
// åœ¨ Activity é”€æ¯åæ˜¾ç¤º Dialog ä¼šå´©æºƒ
// è§£å†³æ–¹æ¡ˆ: åœ¨ onDestroy ä¸­ dismiss Dialog

// âš ï¸ æ³¨æ„3: Dialog ä¸èƒ½æ›¿ä»£ Activity
// Dialog ä¸æ˜¯ç‹¬ç«‹çš„å±å¹•ï¼Œä¸é€‚åˆå¤æ‚çš„äº¤äº’åœºæ™¯
```

---

## ğŸ§ª ç¬¬äº”éƒ¨åˆ†ï¼šå®éªŒ - è¡¨å•éªŒè¯ä¸è‡ªå®šä¹‰ Dialog

### 5.1 å®éªŒä¸€ï¼šè¡¨å•éªŒè¯

**ç›®æ ‡**: åˆ›å»ºä¸€ä¸ªç”¨æˆ·æ³¨å†Œè¡¨å•ï¼ŒåŒ…å«å®Œæ•´çš„è¾“å…¥éªŒè¯é€»è¾‘

#### å¸ƒå±€ (`activity_register.xml`)

```xml
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="24dp">

        <!-- æ ‡é¢˜ -->
        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="æ–°ç”¨æˆ·æ³¨å†Œ"
            android:textSize="28sp"
            android:textStyle="bold"
            android:textColor="#028090"
            android:gravity="center"
            android:layout_marginBottom="32dp" />

        <!-- ç”¨æˆ·å -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="ç”¨æˆ·å *"
            android:textSize="14sp"
            android:textColor="#757575"
            android:layout_marginBottom="4dp" />

        <EditText
            android:id="@+id/usernameEdit"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="3-20ä¸ªå­—ç¬¦"
            android:inputType="text"
            android:textSize="16sp"
            android:layout_marginBottom="4dp" />

        <TextView
            android:id="@+id/usernameError"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text=""
            android:textSize="12sp"
            android:textColor="#F44336"
            android:layout_marginBottom="12dp" />

        <!-- é‚®ç®± -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="é‚®ç®± *"
            android:textSize="14sp"
            android:textColor="#757575"
            android:layout_marginBottom="4dp" />

        <EditText
            android:id="@+id/emailEdit"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="example@email.com"
            android:inputType="textEmailAddress"
            android:textSize="16sp"
            android:layout_marginBottom="4dp" />

        <TextView
            android:id="@+id/emailError"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text=""
            android:textSize="12sp"
            android:textColor="#F44336"
            android:layout_marginBottom="12dp" />

        <!-- å¯†ç  -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="å¯†ç  *"
            android:textSize="14sp"
            android:textColor="#757575"
            android:layout_marginBottom="4dp" />

        <EditText
            android:id="@+id/passwordEdit"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="è‡³å°‘6ä½ï¼Œå«å­—æ¯å’Œæ•°å­—"
            android:inputType="textPassword"
            android:textSize="16sp"
            android:layout_marginBottom="4dp" />

        <TextView
            android:id="@+id/passwordError"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text=""
            android:textSize="12sp"
            android:textColor="#F44336"
            android:layout_marginBottom="12dp" />

        <!-- ç¡®è®¤å¯†ç  -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="ç¡®è®¤å¯†ç  *"
            android:textSize="14sp"
            android:textColor="#757575"
            android:layout_marginBottom="4dp" />

        <EditText
            android:id="@+id/confirmPasswordEdit"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="å†æ¬¡è¾“å…¥å¯†ç "
            android:inputType="textPassword"
            android:textSize="16sp"
            android:layout_marginBottom="4dp" />

        <TextView
            android:id="@+id/confirmPasswordError"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text=""
            android:textSize="12sp"
            android:textColor="#F44336"
            android:layout_marginBottom="24dp" />

        <!-- æ³¨å†ŒæŒ‰é’® -->
        <Button
            android:id="@+id/registerButton"
            android:layout_width="match_parent"
            android:layout_height="48dp"
            android:text="æ³¨å†Œ"
            android:textSize="18sp"
            android:textStyle="bold" />

    </LinearLayout>

</ScrollView>
```

#### Activity ä»£ç  (`RegisterActivity.kt`)

```kotlin
class RegisterActivity : AppCompatActivity() {
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_register)
        
        val usernameEdit = findViewById<EditText>(R.id.usernameEdit)
        val emailEdit = findViewById<EditText>(R.id.emailEdit)
        val passwordEdit = findViewById<EditText>(R.id.passwordEdit)
        val confirmPasswordEdit = findViewById<EditText>(R.id.confirmPasswordEdit)
        val registerButton = findViewById<Button>(R.id.registerButton)
        
        // å®æ—¶éªŒè¯ï¼šç”¨æˆ·å
        usernameEdit.doAfterTextChanged { text ->
            val error = validateUsername(text.toString())
            findViewById<TextView>(R.id.usernameError).text = error ?: ""
        }
        
        // å®æ—¶éªŒè¯ï¼šé‚®ç®±
        emailEdit.doAfterTextChanged { text ->
            val error = validateEmail(text.toString())
            findViewById<TextView>(R.id.emailError).text = error ?: ""
        }
        
        // å®æ—¶éªŒè¯ï¼šå¯†ç 
        passwordEdit.doAfterTextChanged { text ->
            val error = validatePassword(text.toString())
            findViewById<TextView>(R.id.passwordError).text = error ?: ""
        }
        
        // å®æ—¶éªŒè¯ï¼šç¡®è®¤å¯†ç 
        confirmPasswordEdit.doAfterTextChanged { text ->
            val error = validateConfirmPassword(
                passwordEdit.text.toString(),
                text.toString()
            )
            findViewById<TextView>(R.id.confirmPasswordError).text = error ?: ""
        }
        
        // æ³¨å†ŒæŒ‰é’®
        registerButton.setOnClickListener {
            val username = usernameEdit.text.toString().trim()
            val email = emailEdit.text.toString().trim()
            val password = passwordEdit.text.toString()
            val confirmPassword = confirmPasswordEdit.text.toString()
            
            // å…¨é¢éªŒè¯
            val usernameError = validateUsername(username)
            val emailError = validateEmail(email)
            val passwordError = validatePassword(password)
            val confirmError = validateConfirmPassword(password, confirmPassword)
            
            // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
            findViewById<TextView>(R.id.usernameError).text = usernameError ?: ""
            findViewById<TextView>(R.id.emailError).text = emailError ?: ""
            findViewById<TextView>(R.id.passwordError).text = passwordError ?: ""
            findViewById<TextView>(R.id.confirmPasswordError).text = confirmError ?: ""
            
            // å¦‚æœæœ‰ä»»ä½•é”™è¯¯ï¼Œä¸ç»§ç»­
            if (usernameError != null || emailError != null ||
                passwordError != null || confirmError != null) {
                return@setOnClickListener
            }
            
            // éªŒè¯é€šè¿‡ï¼æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
            AlertDialog.Builder(this)
                .setTitle("æ³¨å†Œç¡®è®¤")
                .setMessage("ç”¨æˆ·å: $username\né‚®ç®±: $email\n\nç¡®è®¤æ³¨å†Œï¼Ÿ")
                .setPositiveButton("ç¡®è®¤æ³¨å†Œ") { dialog, _ ->
                    dialog.dismiss()
                    Toast.makeText(this, "âœ“ æ³¨å†ŒæˆåŠŸï¼æ¬¢è¿ $username", Toast.LENGTH_LONG).show()
                }
                .setNegativeButton("å–æ¶ˆ") { dialog, _ ->
                    dialog.dismiss()
                }
                .show()
        }
    }
    
    // ===== éªŒè¯æ–¹æ³• =====
    
    private fun validateUsername(username: String): String? {
        if (username.isEmpty()) return "ç”¨æˆ·åä¸èƒ½ä¸ºç©º"
        if (username.length < 3) return "ç”¨æˆ·åè‡³å°‘3ä¸ªå­—ç¬¦"
        if (username.length > 20) return "ç”¨æˆ·åæœ€å¤š20ä¸ªå­—ç¬¦"
        if (!username.matches(Regex("^[a-zA-Z0-9_]+$"))) return "ä»…å…è®¸å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿"
        return null  // éªŒè¯é€šè¿‡
    }
    
    private fun validateEmail(email: String): String? {
        if (email.isEmpty()) return "é‚®ç®±ä¸èƒ½ä¸ºç©º"
        if (!email.matches(Regex("^[\\w.-]+@[\\w.-]+\\.[a-zA-Z]{2,}$"))) return "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"
        return null
    }
    
    private fun validatePassword(password: String): String? {
        if (password.isEmpty()) return "å¯†ç ä¸èƒ½ä¸ºç©º"
        if (password.length < 6) return "å¯†ç è‡³å°‘6ä½"
        if (password.length > 20) return "å¯†ç æœ€å¤š20ä½"
        if (!password.any { it.isLetter() }) return "å¯†ç å¿…é¡»åŒ…å«å­—æ¯"
        if (!password.any { it.isDigit() }) return "å¯†ç å¿…é¡»åŒ…å«æ•°å­—"
        return null
    }
    
    private fun validateConfirmPassword(password: String, confirm: String): String? {
        if (confirm.isEmpty()) return "è¯·ç¡®è®¤å¯†ç "
        if (password != confirm) return "ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´"
        return null
    }
}
```

### 5.2 å®éªŒäºŒï¼šè‡ªå®šä¹‰ Dialog

**ç›®æ ‡**: åœ¨è®¡ç®—å™¨åº”ç”¨ä¸­åˆ›å»ºä¸€ä¸ªæŸ¥çœ‹å†å²è®°å½•çš„è‡ªå®šä¹‰å¯¹è¯æ¡†

å‚è€ƒç¬¬å››éƒ¨åˆ†ä¸­ `HistoryDialog` çš„å®Œæ•´å®ç°ï¼Œå­¦ç”Ÿéœ€è¦ï¼š

1. åˆ›å»ºè‡ªå®šä¹‰ Dialog å¸ƒå±€
2. ç¼–å†™ Dialog ç±»ï¼Œæ¥æ”¶æ•°æ®å¹¶æ¸²æŸ“åˆ—è¡¨
3. åœ¨ä¸» Activity ä¸­è°ƒç”¨å¹¶ä¼ å…¥æ•°æ®
4. å®ç°æ¸…ç©ºå†å²åŠŸèƒ½

**å®éªŒæ­¥éª¤**:

1. åˆ›å»º `dialog_history.xml` å¸ƒå±€ï¼ˆå¸¦æ ‡é¢˜æ ã€æ»šåŠ¨åˆ—è¡¨ã€æ¸…ç©ºæŒ‰é’®ï¼‰
2. åˆ›å»º `HistoryDialog.kt` ç±»ç»§æ‰¿ `Dialog`
3. åœ¨ `MainActivity` ä¸­ç»´æŠ¤ä¸€ä¸ª `MutableList<String>` å­˜å‚¨è®¡ç®—è®°å½•
4. æ¯æ¬¡è®¡ç®—å®Œæˆåå°†è®°å½•æ·»åŠ åˆ°åˆ—è¡¨
5. ç‚¹å‡»"å†å²"æŒ‰é’®æ—¶å¼¹å¼€ `HistoryDialog`

---

## ğŸ“ ç¬¬å…­éƒ¨åˆ†ï¼šè¯¾åä½œä¸š â€” è®¡ç®—å™¨åº”ç”¨

### 6.1 åº”ç”¨æ¦‚è¿°

å¼€å‘ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„å››åˆ™è¿ç®—è®¡ç®—å™¨åº”ç”¨ï¼Œç»¼åˆè¿ç”¨æœ¬å‘¨å’Œå‰å‡ å‘¨å­¦ä¹ åˆ°çš„çŸ¥è¯†ç‚¹ã€‚

#### åŠŸèƒ½è¦æ±‚

**å¿…éœ€åŠŸèƒ½**:

- æ•°å­—è¾“å…¥ï¼ˆ0-9ï¼‰å’Œå°æ•°ç‚¹è¾“å…¥
- å››åˆ™è¿ç®—ï¼šåŠ ï¼ˆ+ï¼‰ã€å‡ï¼ˆ-ï¼‰ã€ä¹˜ï¼ˆÃ—ï¼‰ã€é™¤ï¼ˆÃ·ï¼‰
- ç­‰å·ï¼ˆ=ï¼‰è®¡ç®—ç»“æœ
- æ¸…ç©ºï¼ˆCï¼‰æŒ‰é’®
- åˆ é™¤æœ«ä½ï¼ˆâŒ«ï¼‰æŒ‰é’®
- è¿ç®—è¿‡ç¨‹å’Œç»“æœåœ¨å±å¹•ä¸Šå®æ—¶æ˜¾ç¤º
- é™¤ä»¥é›¶æ—¶å¼¹å‡º AlertDialog æç¤ºé”™è¯¯
- è®¡ç®—å†å²è®°å½•ï¼ˆè‡ªå®šä¹‰ Dialog å±•ç¤ºï¼‰

**åŠ åˆ†åŠŸèƒ½**ï¼ˆå¯é€‰ï¼‰:

- âœ¨ æ­£è´Ÿåˆ‡æ¢ï¼ˆ+/-ï¼‰æŒ‰é’®
- âœ¨ ç™¾åˆ†æ¯”ï¼ˆ%ï¼‰è¿ç®—
- âœ¨ å°æ•°ç‚¹ç²¾åº¦æ§åˆ¶ï¼ˆé¿å…æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜ï¼‰
- âœ¨ å±å¹•æ—‹è½¬åä¿æŒçŠ¶æ€
- âœ¨ é•¿æŒ‰å†å²è®°å½•å¤åˆ¶åˆ°å‰ªè´´æ¿

### 6.2 UI è®¾è®¡å‚è€ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             â”‚
â”‚  ğŸ“‹ å†å²                    â”‚  â† å³ä¸Šè§’æŒ‰é’®ï¼Œç‚¹å‡»æ‰“å¼€å†å² Dialog
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚     3 + 5           â”‚    â”‚  â† è¿ç®—è¿‡ç¨‹
â”‚  â”‚           = 8       â”‚    â”‚  â† å½“å‰ç»“æœï¼ˆå¤§å­—ä½“ï¼‰
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ C  â”‚ +/âˆ’â”‚  %  â”‚  Ã· â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚  7 â”‚  8 â”‚  9 â”‚  Ã— â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚  4 â”‚  5 â”‚  6 â”‚  âˆ’ â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚  1 â”‚  2 â”‚  3 â”‚  + â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚  0      â”‚  . â”‚  = â”‚      â”‚  â† 0 å ä¸¤æ ¼å®½åº¦
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜      â”‚
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 å®Œæ•´å‚è€ƒä»£ç 

#### é¡¹ç›®ç»“æ„

```
app/src/main/
â”œâ”€â”€ java/com/example/calculator/
â”‚   â”œâ”€â”€ MainActivity.kt          (ä¸»ç•Œé¢å’Œè®¡ç®—é€»è¾‘)
â”‚   â””â”€â”€ HistoryDialog.kt         (å†å²è®°å½•è‡ªå®šä¹‰ Dialog)
â”œâ”€â”€ res/
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ activity_main.xml    (ä¸»ç•Œé¢å¸ƒå±€)
â”‚   â”‚   â””â”€â”€ dialog_history.xml   (å†å²è®°å½•å¼¹çª—å¸ƒå±€)
â”‚   â”œâ”€â”€ values/
â”‚   â”‚   â”œâ”€â”€ colors.xml           (é¢œè‰²å®šä¹‰)
â”‚   â”‚   â””â”€â”€ strings.xml          (å­—ç¬¦ä¸²èµ„æº)
â”‚   â””â”€â”€ drawable/
â”‚       â””â”€â”€ btn_circle.xml       (åœ†å½¢æŒ‰é’®èƒŒæ™¯)
â””â”€â”€ AndroidManifest.xml
```

#### colors.xml

```xml
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="primary">     #028090 </color>
    <color name="primary_dark">#01636f</color>
    <color name="accent">      #02C39A </color>
    <color name="number_bg">   #F5F5F5 </color>
    <color name="operator_bg"> #E0F7FA </color>
    <color name="equal_bg">    #028090 </color>
    <color name="clear_bg">    #FFCDD2 </color>
    <color name="text_dark">   #212121 </color>
    <color name="text_white">  #FFFFFF </color>
    <color name="text_gray">   #9E9E9E </color>
    <color name="divider">     #EEEEEE </color>
    <color name="history_title_bg">#028090</color>
</resources>
```

#### btn_circle.xmlï¼ˆåœ†å½¢æŒ‰é’®èƒŒæ™¯ï¼‰

```xml
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval">
    <solid android:color="@color/number_bg" />
    <size android:width="64dp"
          android:height="64dp" />
</shape>
```

#### activity_main.xml

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@color/white">

    <!-- é¡¶éƒ¨æ  -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="48dp"
        android:orientation="horizontal"
        android:gravity="center_vertical"
        android:background="@color/primary"
        android:paddingHorizontal="16dp">

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="è®¡ç®—å™¨"
            android:textSize="20sp"
            android:textStyle="bold"
            android:textColor="@color/text_white" />

        <Button
            android:id="@+id/btnHistory"
            android:layout_width="wrap_content"
            android:layout_height="36dp"
            android:text="ğŸ“‹ å†å²"
            android:textSize="14sp"
            android:textColor="@color/text_white"
            android:background="@android:color/transparent"
            android:paddingHorizontal="8dp" />

    </LinearLayout>

    <!-- æ˜¾ç¤ºåŒºåŸŸ -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="160dp"
        android:orientation="vertical"
        android:gravity="end|bottom"
        android:padding="24dp"
        android:background="@color/white">

        <!-- è¿ç®—è¿‡ç¨‹ -->
        <TextView
            android:id="@+id/tvExpression"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text=""
            android:textSize="18sp"
            android:textColor="@color/text_gray"
            android:gravity="end"
            android:layout_marginBottom="8dp" />

        <!-- å½“å‰æ•°å­—/ç»“æœ -->
        <TextView
            android:id="@+id/tvResult"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="0"
            android:textSize="48sp"
            android:textStyle="bold"
            android:textColor="@color/text_dark"
            android:gravity="end"
            tools:text="8" />

    </LinearLayout>

    <!-- åˆ†éš”çº¿ -->
    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="@color/divider" />

    <!-- æŒ‰é’®åŒºåŸŸ -->
    <GridLayout
        android:id="@+id/buttonGrid"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:columnCount="4"
        android:rowCount="5"
        android:padding="8dp">

        <!-- ç¬¬ä¸€è¡Œ: C  âŒ«  +/âˆ’  Ã· -->
        <Button android:id="@+id/btnClear"
            android:text="C"
            android:textSize="20sp"
            android:textColor="#F44336"
            android:background="@color/clear_bg"
            android:layout_columnSpan="1"
            android:layout_width="0dp" android:layout_height="0dp"
            android:layout_columnWeight="1" android:layout_rowWeight="1"
            android:margin="4dp" />

        <Button android:id="@+id/btnDelete"
            android:text="âŒ«"
            android:textSize="22sp"
            android:textColor="@color/text_dark"
            android:background="@color/number_bg"
            android:layout_width="0dp" android:layout_height="0dp"
            android:layout_columnWeight="1" android:layout_rowWeight="1"
            android:margin="4dp" />

        <Button android:id="@+id/btnPercent"
            android:text="%"
            android:textSize="22sp"
            android:textColor="@color/text_dark"
            android:background="@color/number_bg"
            android:layout_width="0dp" android:layout_height="0dp"
            android:layout_columnWeight="1" android:layout_rowWeight="1"
            android:margin="4dp" />

        <Button android:id="@+id/btnDivide"
            android:text="Ã·"
            android:textSize="24sp"
            android:textColor="@color/primary"
            android:background="@color/operator_bg"
            android:layout_width="0dp" android:layout_height="0dp"
            android:layout_columnWeight="1" android:layout_rowWeight="1"
            android:margin="4dp" />

        <!-- ç¬¬äºŒè¡Œ: 7  8  9  Ã— -->
        <Button android:id="@+id/btn7"
            android:text="7" android:textSize="28sp"
            android:textColor="@color/text_dark"
            android:background="@color/number_bg"
            android:layout_width="0dp" android:layout_height="0dp"
            android:layout_columnWeight="1" android:layout_rowWeight="1" android:margin="4dp" />
        <Button android:id="@+id/btn8"
            android:text="8" android:textSize="28sp"
            android:textColor="@color/text_dark"
            android:background="@color/number_bg"
            android:layout_width="0dp" android:layout_height="0dp"
            android:layout_columnWeight="1" android:layout_rowWeight="1" android:margin="4dp" />
        <Button android:id="@+id/btn9"
            android:text="9" android:textSize="28sp"
            android:textColor="@color/text_dark"
            android:background="@color/number_bg"
            android:layout_width="0dp" android:layout_height="0dp"
            android:layout_columnWeight="1" android:layout_rowWeight="1" android:margin="4dp" />
        <Button android:id="@+id/btnMultiply"
            android:text="Ã—" android:textSize="24sp"
            android:textColor="@color/primary"
            android:background="@color/operator_bg"
            android:layout_width="0dp" android:layout_height="0dp"
            android:layout_columnWeight="1" android:layout_rowWeight="1" android:margin="4dp" />

        <!-- ç¬¬ä¸‰è¡Œ: 4  5  6  âˆ’ -->
        <Button android:id="@+id/btn4"
            android:text="4" android:textSize="28sp"
            android:textColor="@color/text_dark"
            android:background="@color/number_bg"
            android:layout_width="0dp" android:layout_height="0dp"
            android:layout_columnWeight="1" android:layout_rowWeight="1" android:margin="4dp" />
        <Button android:id="@+id/btn5"
            android:text="5" android:textSize="28sp"
            android:textColor="@color/text_dark"
            android:background="@color/number_bg"
            android:layout_width="0dp" android:layout_height="0dp"
            android:layout_columnWeight="1" android:layout_rowWeight="1" android:margin="4dp" />
        <Button android:id="@+id/btn6"
            android:text="6" android:textSize="28sp"
            android:textColor="@color/text_dark"
            android:background="@color/number_bg"
            android:layout_width="0dp" android:layout_height="0dp"
            android:layout_columnWeight="1" android:layout_rowWeight="1" android:margin="4dp" />
        <Button android:id="@+id/btnMinus"
            android:text="âˆ’" android:textSize="24sp"
            android:textColor="@color/primary"
            android:background="@color/operator_bg"
            android:layout_width="0dp" android:layout_height="0dp"
            android:layout_columnWeight="1" android:layout_rowWeight="1" android:margin="4dp" />

        <!-- ç¬¬å››è¡Œ: 1  2  3  + -->
        <Button android:id="@+id/btn1"
            android:text="1" android:textSize="28sp"
            android:textColor="@color/text_dark"
            android:background="@color/number_bg"
            android:layout_width="0dp" android:layout_height="0dp"
            android:layout_columnWeight="1" android:layout_rowWeight="1" android:margin="4dp" />
        <Button android:id="@+id/btn2"
            android:text="2" android:textSize="28sp"
            android:textColor="@color/text_dark"
            android:background="@color/number_bg"
            android:layout_width="0dp" android:layout_height="0dp"
            android:layout_columnWeight="1" android:layout_rowWeight="1" android:margin="4dp" />
        <Button android:id="@+id/btn3"
            android:text="3" android:textSize="28sp"
            android:textColor="@color/text_dark"
            android:background="@color/number_bg"
            android:layout_width="0dp" android:layout_height="0dp"
            android:layout_columnWeight="1" android:layout_rowWeight="1" android:margin="4dp" />
        <Button android:id="@+id/btnPlus"
            android:text="+" android:textSize="24sp"
            android:textColor="@color/primary"
            android:background="@color/operator_bg"
            android:layout_width="0dp" android:layout_height="0dp"
            android:layout_columnWeight="1" android:layout_rowWeight="1" android:margin="4dp" />

        <!-- ç¬¬äº”è¡Œ: 0(å 2æ ¼)  .  = -->
        <Button android:id="@+id/btn0"
            android:text="0" android:textSize="28sp"
            android:textColor="@color/text_dark"
            android:background="@color/number_bg"
            android:layout_columnSpan="2"
            android:layout_width="0dp" android:layout_height="0dp"
            android:layout_columnWeight="1" android:layout_rowWeight="1" android:margin="4dp" />
        <Button android:id="@+id/btnDot"
            android:text="." android:textSize="28sp"
            android:textColor="@color/text_dark"
            android:background="@color/number_bg"
            android:layout_width="0dp" android:layout_height="0dp"
            android:layout_columnWeight="1" android:layout_rowWeight="1" android:margin="4dp" />
        <Button android:id="@+id/btnEquals"
            android:text="=" android:textSize="24sp"
            android:textColor="@color/text_white"
            android:background="@color/equal_bg"
            android:layout_width="0dp" android:layout_height="0dp"
            android:layout_columnWeight="1" android:layout_rowWeight="1" android:margin="4dp" />

    </GridLayout>

</LinearLayout>
```

#### MainActivity.kt

```kotlin
package com.example.calculator

import android.os.Bundle
import android.widget.Button
import android.widget.TextView
import androidx.appcompat.app.AlertDialog
import androidx.appcompat.app.AppCompatActivity

class MainActivity : AppCompatActivity() {
    
    // ===== UI ç»„ä»¶ =====
    private lateinit var tvExpression: TextView   // è¿ç®—è¿‡ç¨‹
    private lateinit var tvResult: TextView       // å½“å‰ç»“æœ
    
    // ===== è®¡ç®—çŠ¶æ€ =====
    private var currentInput = ""       // å½“å‰è¾“å…¥çš„æ•°å­—å­—ç¬¦ä¸²
    private var previousNumber = 0.0    // å‰ä¸€ä¸ªæ•°å­—
    private var operator = ""           // å½“å‰è¿ç®—ç¬¦ (+, -, Ã—, Ã·)
    private var expression = ""         // è¿ç®—è¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼ˆç”¨äºæ˜¾ç¤ºï¼‰
    private var justCalculated = false  // æ˜¯å¦åˆšè®¡ç®—å®Œç»“æœ
    
    // ===== å†å²è®°å½• =====
    private val history = mutableListOf<String>()
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        
        tvExpression = findViewById(R.id.tvExpression)
        tvResult = findViewById(R.id.tvResult)
        
        setupButtons()
    }
    
    // ===== æŒ‰é’®ç»‘å®š =====
    
    private fun setupButtons() {
        // æ•°å­—æŒ‰é’®
        val numberButtons = mapOf(
            R.id.btn0 to "0", R.id.btn1 to "1", R.id.btn2 to "2",
            R.id.btn3 to "3", R.id.btn4 to "4", R.id.btn5 to "5",
            R.id.btn6 to "6", R.id.btn7 to "7", R.id.btn8 to "8",
            R.id.btn9 to "9"
        )
        numberButtons.forEach { (id, digit) ->
            findViewById<Button>(id).setOnClickListener {
                onNumberPressed(digit)
            }
        }
        
        // å°æ•°ç‚¹
        findViewById<Button>(R.id.btnDot).setOnClickListener { onDotPressed() }
        
        // è¿ç®—ç¬¦
        findViewById<Button>(R.id.btnPlus).setOnClickListener { onOperatorPressed("+") }
        findViewById<Button>(R.id.btnMinus).setOnClickListener { onOperatorPressed("âˆ’") }
        findViewById<Button>(R.id.btnMultiply).setOnClickListener { onOperatorPressed("Ã—") }
        findViewById<Button>(R.id.btnDivide).setOnClickListener { onOperatorPressed("Ã·") }
        
        // ç­‰å·
        findViewById<Button>(R.id.btnEquals).setOnClickListener { onEqualsPressed() }
        
        // æ¸…ç©º
        findViewById<Button>(R.id.btnClear).setOnClickListener { onClearPressed() }
        
        // åˆ é™¤
        findViewById<Button>(R.id.btnDelete).setOnClickListener { onDeletePressed() }
        
        // ç™¾åˆ†æ¯”
        findViewById<Button>(R.id.btnPercent).setOnClickListener { onPercentPressed() }
        
        // å†å²è®°å½•
        findViewById<Button>(R.id.btnHistory).setOnClickListener { onHistoryPressed() }
    }
    
    // ===== æŒ‰é’®å¤„ç†é€»è¾‘ =====
    
    private fun onNumberPressed(digit: String) {
        if (justCalculated) {
            // åˆšè®¡ç®—å®Œï¼ŒæŒ‰æ•°å­—é”®ç›¸å½“äºé‡æ–°å¼€å§‹
            currentInput = ""
            expression = ""
            tvExpression.text = ""
            justCalculated = false
        }
        
        // é˜²æ­¢è¾“å…¥è¿‡é•¿
        if (currentInput.length >= 10) return
        
        currentInput += digit
        tvResult.text = formatNumber(currentInput)
    }
    
    private fun onDotPressed() {
        if (justCalculated) {
            currentInput = "0"
            expression = ""
            tvExpression.text = ""
            justCalculated = false
        }
        
        // å¦‚æœå·²ç»æœ‰å°æ•°ç‚¹ï¼Œä¸å†æ·»åŠ 
        if (currentInput.contains(".")) return
        
        // å¦‚æœè¾“å…¥ä¸ºç©ºï¼Œå…ˆåŠ  "0"
        if (currentInput.isEmpty()) {
            currentInput = "0"
        }
        
        currentInput += "."
        tvResult.text = currentInput
    }
    
    private fun onOperatorPressed(op: String) {
        justCalculated = false
        
        if (currentInput.isNotEmpty() && operator.isNotEmpty()) {
            // å¦‚æœå·²ç»æœ‰è¿ç®—ç¬¦å’Œæ–°çš„è¾“å…¥ï¼Œå…ˆæ‰§è¡Œä¹‹å‰çš„è¿ç®—ï¼ˆé“¾å¼è®¡ç®—ï¼‰
            calculate()
            previousNumber = tvResult.text.toString().toDoubleOrNull() ?: 0.0
        } else if (currentInput.isNotEmpty()) {
            previousNumber = currentInput.toDoubleOrNull() ?: 0.0
        }
        
        operator = op
        expression = "${formatNumber(previousNumber.toString())} $op"
        tvExpression.text = expression
        currentInput = ""
    }
    
    private fun onEqualsPressed() {
        if (operator.isEmpty() || currentInput.isEmpty()) return
        
        val expressionForHistory = "$expression ${tvResult.text}"
        calculate()
        
        // è®°å½•å†å²
        val result = tvResult.text.toString()
        history.add(0, "$expressionForHistory = $result")
        
        justCalculated = true
    }
    
    private fun onClearPressed() {
        currentInput = ""
        previousNumber = 0.0
        operator = ""
        expression = ""
        justCalculated = false
        
        tvResult.text = "0"
        tvExpression.text = ""
    }
    
    private fun onDeletePressed() {
        if (currentInput.isNotEmpty()) {
            currentInput = currentInput.dropLast(1)
            tvResult.text = if (currentInput.isEmpty()) "0" else currentInput
        }
    }
    
    private fun onPercentPressed() {
        val current = currentInput.toDoubleOrNull() ?: tvResult.text.toString().toDoubleOrNull() ?: 0.0
        val result = current / 100.0
        currentInput = formatNumber(result.toString())
        tvResult.text = currentInput
    }
    
    private fun onHistoryPressed() {
        val dialog = HistoryDialog(this, history) {
            history.clear()
        }
        dialog.show()
    }
    
    // ===== æ ¸å¿ƒè®¡ç®— =====
    
    private fun calculate() {
        val secondNumber = currentInput.toDoubleOrNull() ?: return
        
        val result: Double = when (operator) {
            "+" -> previousNumber + secondNumber
            "âˆ’" -> previousNumber - secondNumber
            "Ã—" -> previousNumber * secondNumber
            "Ã·" -> {
                if (secondNumber == 0.0) {
                    // é™¤ä»¥é›¶é”™è¯¯
                    AlertDialog.Builder(this)
                        .setTitle("âš ï¸ è¿ç®—é”™è¯¯")
                        .setMessage("ä¸èƒ½é™¤ä»¥é›¶ï¼è¯·é‡æ–°è¾“å…¥ã€‚")
                        .setPositiveButton("ç¡®å®š") { dialog, _ -> dialog.dismiss() }
                        .show()
                    return  // ä¸æ‰§è¡Œåç»­æ“ä½œ
                }
                previousNumber / secondNumber
            }
            else -> return
        }
        
        tvResult.text = formatNumber(result.toString())
        tvExpression.text = expression
        
        // é‡ç½®çŠ¶æ€
        previousNumber = result
        operator = ""
        currentInput = ""
    }
    
    // ===== å·¥å…·æ–¹æ³• =====
    
    /**
     * æ ¼å¼åŒ–æ•°å­—æ˜¾ç¤º
     * - å¦‚æœæ˜¯æ•´æ•°ï¼Œä¸æ˜¾ç¤ºå°æ•°ç‚¹ï¼ˆå¦‚ 8.0 â†’ "8"ï¼‰
     * - å¦‚æœæ˜¯å°æ•°ï¼Œä¿ç•™æœ‰æ•ˆä½æ•°ï¼ˆå¦‚ 3.14159 â†’ "3.14159"ï¼‰
     * - é™åˆ¶æœ€å¤šæ˜¾ç¤º8ä½å°æ•°
     */
    private fun formatNumber(numberStr: String): String {
        val number = numberStr.toDoubleOrNull() ?: return numberStr
        return if (number == number.toLong().toDouble()) {
            number.toLong().toString()
        } else {
            // å»é™¤å¤šä½™çš„æœ«å°¾é›¶
            String.format("%.8f", number).trimEnd('0').trimEnd('.')
        }
    }
}
```

#### HistoryDialog.kt

```kotlin
package com.example.calculator

import android.app.Dialog
import android.content.Context
import android.os.Bundle
import android.view.ViewGroup
import android.widget.Button
import android.widget.ImageView
import android.widget.LinearLayout
import android.widget.TextView
import android.widget.View

class HistoryDialog(
    context: Context,
    private val historyList: MutableList<String>,
    private val onClear: () -> Unit
) : Dialog(context) {
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.dialog_history)
        window?.attributes?.width = android.R.attr.match_parent
        
        val historyLayout = findViewById<LinearLayout>(R.id.dialogHistoryList)
        
        // å…³é—­æŒ‰é’®
        findViewById<ImageView>(R.id.dialogCloseBtn).setOnClickListener {
            dismiss()
        }
        
        if (historyList.isEmpty()) {
            // æ— æ•°æ®æç¤º
            val emptyText = TextView(context)
            emptyText.text = "æ²¡æœ‰è®¡ç®—å†å²è®°å½•"
            emptyText.textAlignment = android.view.TextAlignment.CENTER
            emptyText.setTextColor(android.graphics.Color.parseColor("#9E9E9E"))
            emptyText.setPadding(0, 60, 0, 60)
            historyLayout.addView(emptyText)
            
            // éšè—æ¸…ç©ºæŒ‰é’®
            findViewById<Button>(R.id.dialogClearBtn).visibility = android.view.View.GONE
        } else {
            historyList.forEachIndexed { index, record ->
                // åºå· + è®°å½•
                val itemLayout = LinearLayout(context)
                itemLayout.orientation = LinearLayout.HORIZONTAL
                itemLayout.setPadding(0, 16, 0, 16)
                
                // åºå·
                val numberText = TextView(context)
                numberText.text = "${index + 1}."
                numberText.textSize = 14f
                numberText.setTextColor(android.graphics.Color.parseColor("#9E9E9E"))
                numberText.width = 28
                
                // è®°å½•å†…å®¹
                val recordText = TextView(context)
                recordText.text = record
                recordText.textSize = 15f
                recordText.setTextColor(android.graphics.Color.parseColor("#212121"))
                
                itemLayout.addView(numberText)
                itemLayout.addView(recordText)
                historyLayout.addView(itemLayout)
                
                // åˆ†éš”çº¿ï¼ˆæœ€åä¸€æ¡ä¸åŠ ï¼‰
                if (index < historyList.size - 1) {
                    val divider = View(context)
                    divider.setBackgroundColor(android.graphics.Color.parseColor("#EEEEEE"))
                    divider.layoutParams = ViewGroup.LayoutParams(
                        ViewGroup.LayoutParams.MATCH_PARENT, 1
                    )
                    historyLayout.addView(divider)
                }
            }
        }
        
        // æ¸…ç©ºæŒ‰é’®
        findViewById<Button>(R.id.dialogClearBtn).setOnClickListener {
            onClear()
            dismiss()
        }
    }
}
```

#### dialog_history.xml

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="@android:color/white">

    <!-- æ ‡é¢˜æ  -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="48dp"
        android:orientation="horizontal"
        android:gravity="center_vertical"
        android:background="@color/history_title_bg"
        android:paddingHorizontal="16dp">

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="ğŸ“‹ è®¡ç®—å†å²"
            android:textSize="18sp"
            android:textStyle="bold"
            android:textColor="@android:color/white" />

        <ImageView
            android:id="@+id/dialogCloseBtn"
            android:layout_width="24dp"
            android:layout_height="24dp"
            android:src="@android:drawable/ic_menu_close_clear_search"
            android:colorFilter="@android:color/white"
            android:contentDescription="å…³é—­" />

    </LinearLayout>

    <!-- æ»šåŠ¨åˆ—è¡¨ -->
    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="240dp">

        <LinearLayout
            android:id="@+id/dialogHistoryList"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:paddingHorizontal="16dp" />

    </ScrollView>

    <!-- æ¸…ç©ºæŒ‰é’® -->
    <Button
        android:id="@+id/dialogClearBtn"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="æ¸…ç©ºå†å²"
        android:textColor="#F44336"
        android:layout_marginHorizontal="16dp"
        android:layout_marginVertical="8dp"
        style="@style/Widget.Material3.Button.OutlinedButton" />

</LinearLayout>
```

### 6.4 è¯„åˆ†æ ‡å‡†

|é¡¹ç›®|åˆ†å€¼|è¯„åˆ†ç»†åˆ™|
|---|---|---|
|åŸºç¡€å››åˆ™è¿ç®—|35%|+ã€âˆ’ã€Ã—ã€Ã· è®¡ç®—ç»“æœæ­£ç¡®|
|UI å¸ƒå±€|15%|æŒ‰é’®æ’åˆ—åˆç†ï¼Œæ˜¾ç¤ºåŒºåŸŸæ¸…æ™°ï¼Œä¸å‚è€ƒè®¾è®¡æ¥è¿‘|
|é”™è¯¯å¤„ç†|15%|é™¤ä»¥é›¶å¼¹å‡º Dialog æç¤ºï¼Œè¾¹ç•Œæƒ…å†µå¤„ç†æ­£ç¡®|
|å†å²è®°å½•|15%|è‡ªå®šä¹‰ Dialog æ­£å¸¸æ˜¾ç¤ºï¼Œæ¸…ç©ºåŠŸèƒ½å¯ç”¨|
|åˆ é™¤ä¸æ¸…ç©º|10%|C å’Œ âŒ« æŒ‰é’®åŠŸèƒ½æ­£ç¡®|
|ä»£ç è´¨é‡|10%|ä»£ç å‘½åè§„èŒƒã€æœ‰é€‚å½“æ³¨é‡Šã€ç»“æ„æ¸…æ™°|

#### åŠ åˆ†é¡¹ï¼ˆå¯é€‰ï¼Œæ¯é¡¹+5åˆ†ï¼Œä¸Šé™+15åˆ†ï¼‰

- âœ¨ æ­£è´Ÿåˆ‡æ¢æŒ‰é’®åŠŸèƒ½æ­£ç¡®
- âœ¨ ç™¾åˆ†æ¯”è¿ç®—åŠŸèƒ½æ­£ç¡®
- âœ¨ å±å¹•æ—‹è½¬åçŠ¶æ€ä¸ä¸¢å¤±
- âœ¨ å°æ•°ç²¾åº¦å¤„ç†è§„èŒƒï¼ˆå¦‚ 0.1 + 0.2 ä¸æ˜¾ç¤ºä¸º 0.30000000004ï¼‰
- âœ¨ é•¿æŒ‰å†å²è®°å½•å¯å¤åˆ¶åˆ°å‰ªè´´æ¿

#### æäº¤è¦æ±‚

1. **æºä»£ç ** â€” å®Œæ•´ Android é¡¹ç›®ï¼ˆZIP å‹ç¼©åŒ…ï¼‰
2. **è¿è¡Œæˆªå›¾** â€” è‡³å°‘4å¼ ï¼ˆåˆå§‹ç•Œé¢ã€è®¡ç®—è¿‡ç¨‹ã€ç»“æœã€å†å²è®°å½•å¼¹çª—ï¼‰
3. **è¯´æ˜æ–‡æ¡£** â€” README.mdï¼ˆåŠŸèƒ½è¯´æ˜ + é‡åˆ°çš„é—®é¢˜ä¸è§£å†³è¿‡ç¨‹ï¼‰

**æ–‡ä»¶å‘½å**: `å§“å_å­¦å·_Week5_è®¡ç®—å™¨.zip`  
**æˆªæ­¢æ—¶é—´**: ç¬¬6å‘¨å‘¨ä¸€ä¸Šè¯¾å‰

---

## ğŸ’¡ ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæœ€ä½³å®è·µä¸å¸¸è§å‘

### 7.1 äº‹ä»¶å¤„ç†è§„èŒƒ

```kotlin
// âœ… æ­£ç¡®: ç”¨ return@setOnClickListener å®ç°æå‰é€€å‡º
btnSubmit.setOnClickListener {
    val input = editText.text.toString()
    if (input.isEmpty()) {
        Toast.makeText(this, "ä¸èƒ½ä¸ºç©º", Toast.LENGTH_SHORT).show()
        return@setOnClickListener   // æå‰é€€å‡ºï¼Œä¸ç»§ç»­å¾€ä¸‹æ‰§è¡Œ
    }
    // æ­£å¸¸æµç¨‹ç»§ç»­...
    submitData(input)
}

// âŒ é”™è¯¯: å†™ return ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼ˆLambda ä¸èƒ½ç”¨è£¸ returnï¼‰
btnSubmit.setOnClickListener {
    if (input.isEmpty()) {
        return  // âŒ ç¼–è¯‘é”™è¯¯ï¼
    }
}
```

### 7.2 EditText å¸¸è§é—®é¢˜

```kotlin
// é—®é¢˜1: è·å–çš„æ–‡æœ¬å‰åæœ‰ç©ºæ ¼
val input = editText.text.toString()  // "  hello  "
// âœ… è§£å†³ï¼šç”¨ trim()
val input = editText.text.toString().trim()  // "hello"

// é—®é¢˜2: æ•°å­—è¾“å…¥å¯èƒ½ä¸ºç©ºå­—ç¬¦ä¸²ï¼ŒtoInt() ä¼šå´©æºƒ
val input = editText.text.toString()
val number = input.toInt()  // âŒ å¦‚æœ input ä¸º "" ä¼šå´©æºƒ

// âœ… è§£å†³ï¼šç”¨ toIntOrNull()
val number = input.toIntOrNull() ?: 0  // è§£æå¤±è´¥è¿”å› 0

// é—®é¢˜3: æµ®ç‚¹æ•°ç²¾åº¦
val a = 0.1 + 0.2  // 0.30000000000000004
// âœ… è§£å†³ï¼šä½¿ç”¨ BigDecimal æˆ–æ ¼å¼åŒ–è¾“å‡º
val result = String.format("%.2f", a)  // "0.30"
```

### 7.3 Dialog ä½¿ç”¨è§„èŒƒ

```kotlin
// âœ… æ­£ç¡®: åœ¨å›è°ƒä¸­æ“ä½œ Dialog
AlertDialog.Builder(this)
    .setPositiveButton("ç¡®è®¤") { dialog, _ ->
        dialog.dismiss()  // å…ˆå…³é—­
        doSomething()     // å†æ‰§è¡Œæ“ä½œ
    }
    .show()

// âš ï¸ æ³¨æ„: è‡ªå®šä¹‰ Dialog å¸ƒå±€è¦æ”¾åœ¨ res/layout/ ä¸­
// âŒ ä¸è¦ç”¨ setContentView() åœ¨ Dialog ä¸­è°ƒç”¨ Activity çš„å¸ƒå±€
// âœ… ç”¨ setContentView(R.layout.dialog_xxx) è°ƒç”¨ä¸“å±å¸ƒå±€

// âš ï¸ æ³¨æ„: setView() å’Œ setMessage() ä¸è¦åŒæ—¶ä½¿ç”¨
// ä½¿ç”¨ setView() æ—¶å°±ä¸è¦è®¾ setMessage()ï¼Œå¦åˆ™ä¼šåŒæ—¶æ˜¾ç¤º
```

### 7.4 æµ®ç‚¹æ•°ç²¾åº¦å¤„ç†

```kotlin
// å¸¸è§é—®é¢˜: 0.1 + 0.2 â‰  0.3
println(0.1 + 0.2)  // è¾“å‡º: 0.30000000000000004

// æ–¹æ³•1: String.format æ ¼å¼åŒ–
val result = 0.1 + 0.2
println(String.format("%.1f", result))  // è¾“å‡º: "0.3"

// æ–¹æ³•2: BigDecimalï¼ˆæœ€ç²¾ç¡®ï¼‰
import java.math.BigDecimal

val a = BigDecimal("0.1")
val b = BigDecimal("0.2")
val result = a.add(b)
println(result)  // è¾“å‡º: 0.3

// æ–¹æ³•3: åˆ¤æ–­æ˜¯å¦æ¥è¿‘æ•´æ•°
fun formatNumber(number: Double): String {
    val longVal = Math.round(number)
    return if (Math.abs(number - longVal) < 1e-9) {
        longVal.toString()
    } else {
        String.format("%.8f", number).trimEnd('0').trimEnd('.')
    }
}
```

---

## ğŸ¯ è¯¾åæ€è€ƒé¢˜

1. **ç‚¹å‡»ç›‘å¬å™¨æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹åº”è¯¥é€‰æ‹©å“ªç§ï¼Ÿå†™å‡ºä½ çš„é€‰æ‹©ç†ç”±ã€‚**
    
2. **EditText çš„ `doAfterTextChanged` å’Œ `setOnEditorActionListener` åˆ†åˆ«é€‚ç”¨äºä»€ä¹ˆåœºæ™¯ï¼Ÿ**
    
3. **Toast å’Œ Snackbar å„è‡ªé€‚ç”¨äºä»€ä¹ˆåœºæ™¯ï¼Ÿä½ ä¼šåœ¨ä»€ä¹ˆæƒ…å†µä¸‹é€‰æ‹© Snackbarï¼Ÿ**
    
4. **AlertDialog æœ€å¤šæ”¯æŒå‡ ä¸ªæŒ‰é’®ï¼Ÿå¦‚æœéœ€è¦5ä¸ªé€‰é¡¹åº”è¯¥æ€ä¹ˆå®ç°ï¼Ÿ**
    
5. **ä½ åœ¨å¼€å‘è®¡ç®—å™¨åº”ç”¨æ—¶é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿæ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿï¼ˆå†™å…¥ README.mdï¼‰**
    

---

## ğŸ“š æ‰©å±•é˜…è¯»

### å®˜æ–¹æ–‡æ¡£

- [äº‹ä»¶ä¸å›è°ƒ](https://developer.android.com/develop/ui/views/handling-events)
- [EditText å¼€å‘æŒ‡å—](https://developer.android.com/develop/ui/widgets/edit-text)
- [AlertDialog](https://developer.android.com/develop/ui/components/dialogs)
- [Snackbar](https://developer.android.com/develop/ui/components/snackbar)

### æ¨èæ–‡ç« 

- [Android Button Click Listener](https://developer.android.com/samples/BasicViews/src/com.example.android.basicviews/MainActivity.html)
- [Material Design Dialog Guidelines](https://material.io/components/dialogs)

---

## ğŸ“ ä¸‹å‘¨é¢„å‘Š

**ç¬¬6å‘¨ï¼šæœ¬åœ°æ•°æ®å­˜å‚¨ï¼ˆåŸºç¡€ï¼‰**

- SharedPreferences ä½¿ç”¨ï¼ˆä¿å­˜ç®€å•æ•°æ®ï¼‰
- å†…éƒ¨å­˜å‚¨ä¸å¤–éƒ¨å­˜å‚¨
- æ–‡ä»¶è¯»å†™æ“ä½œ
- åº”ç”¨æƒé™åŸºç¡€

**é¢„ä¹ å»ºè®®**:

- å¤ä¹ æœ¬å‘¨çš„äº‹ä»¶å¤„ç†å’Œ Dialog çŸ¥è¯†
- æ€è€ƒï¼šå¦‚ä½•è®©è®¡ç®—å™¨çš„å†å²è®°å½•åœ¨é‡å¯åä¸ä¸¢å¤±ï¼Ÿ
- äº†è§£"æŒä¹…åŒ–å­˜å‚¨"æ˜¯ä»€ä¹ˆæ„æ€

---

**è¯¾ç¨‹èµ„æ–™æ›´æ–°æ—¶é—´**: 2026å¹´2æœˆ  
**è®²å¸ˆ**: [æ•™å¸ˆå§“å]  
**è”ç³»æ–¹å¼**: [é‚®ç®±]

_è®¡ç®—å™¨æ˜¯å¾ˆå¥½çš„ç»ƒä¹ é¡¹ç›®ï¼ä»”ç»†å®¡è§†å‚è€ƒä»£ç ï¼Œç†è§£é€»è¾‘åå°è¯•è‡ªå·±é‡å†™ã€‚åŠ æ²¹ï¼ğŸš€_